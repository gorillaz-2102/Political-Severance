<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Composer un Gouvernement</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 20px;
    }
    .fonction {
      border: 1px solid #ddd;
      border-radius: 12px;
      background: #fff;
      margin: 10px auto;
      padding: 16px;
      max-width: 800px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }
    .fonction.large {
      font-size: 1.2em;
      font-weight: bold;
    }
    .info {
      flex: 1;
    }
    .image-zone {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #eee;
      margin-left: 16px;
    }
    .image-zone img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .titre {
      font-weight: bold;
    }
    .nom-personne {
      display: block;
      margin-top: 8px;
      color: #0077cc;
      text-decoration: none;
    }
    .nom-personne:hover {
      text-decoration: underline;
    }
    input[type=text] {
      width: 100%;
      padding: 8px;
      margin-top: 8px;
      box-sizing: border-box;
    }
    button {
      margin-top: 8px;
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      background-color: #0077cc;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #005fa3;
    }
    #suggestions {
      position: absolute;
      z-index: 10;
      background: white;
      border: 1px solid #ccc;
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 200px;
      overflow-y: auto;
      width: 300px;
    }
    #suggestions li {
      padding: 8px;
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    #suggestions li:hover {
      background: #eee;
    }
    #suggestions img {
      width: 30px;
      height: 30px;
      object-fit: cover;
      border-radius: 50%;
      margin-right: 8px;
    }
    table {
      margin: 30px auto;
      border-collapse: collapse;
      width: 80%;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
    }
    th {
      background-color: #f0f0f0;
    }
    #btn-valider {
      display: block;
      margin: 30px auto;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      background-color: #28a745;
      color: white;
      cursor: pointer;
    }
    #btn-valider:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>
  <h1>Composer votre gouvernement</h1>

  <div id="fonctions"></div>
  <ul id="suggestions"></ul>

  <div id="fonctions-ministeres"></div>

  <script>
  const fonctions = [
    { nom: "Président de la République", personne: null },
    { nom: "Premier Ministre", personne: null },
    { nom: "Intérieur", personne: null },
    { nom: "Transition écologique et solidaire", personne: null },
    { nom: "Justice", personne: null },
    { nom: "Europe et aff. étrangères", personne: null },
    { nom: "Armées", personne: null },
    { nom: "Cohésion des territoires", personne: null },
    { nom: "Solidarités & Santé", personne: null },
    { nom: "Economie & Finances", personne: null },
    { nom: "Culture", personne: null },
    { nom: "Travail", personne: null },
    { nom: "Education Nationale", personne: null },
    { nom: "Agriculture & Alimentation", personne: null },
    { nom: "Action & Comptes Publics", personne: null },
    { nom: "Enseignement Sup., Recherche & Innov.", personne: null },
    { nom: "Outre-mer", personne: null },
    { nom: "Sports", personne: null },
    { nom: "Secrétariat d'État Egalité H/F", personne: null },
  ];

  function afficherFonctions() {
    const containerTop = document.getElementById('fonctions');
    const containerBottom = document.getElementById('fonctions-ministeres');
    containerTop.innerHTML = '';
    containerBottom.innerHTML = '';

    fonctions.forEach((f, index) => {
      const div = document.createElement('div');
      div.className = 'fonction';
      div.classList.add(index < 2 ? 'large' : 'small');

      const infoDiv = document.createElement('div');
      infoDiv.className = 'info';

      const titre = document.createElement('div');
      titre.className = 'titre';
      titre.textContent = f.nom;
      infoDiv.appendChild(titre);

      const imageDiv = document.createElement('div');
      imageDiv.className = 'image-zone';

      if (f.personne) {
        const wikiUrl = `https://fr.wikipedia.org/wiki/${encodeURIComponent(f.personne.nom.replace(/ /g, "_"))}`;
        const nomLink = document.createElement('a');
        nomLink.className = 'nom-personne';
        nomLink.href = wikiUrl;
        nomLink.target = "_blank";
        nomLink.textContent = f.personne.nom;
        infoDiv.appendChild(nomLink);

        const boutonChanger = document.createElement('button');
        boutonChanger.textContent = "Changer";
        boutonChanger.onclick = () => {
          f.personne = null;
          afficherFonctions();
        };
        infoDiv.appendChild(boutonChanger);

        if (f.personne.image) {
          const img = document.createElement('img');
          img.src = f.personne.image;
          img.alt = f.personne.nom;
          img.onload = () => imageDiv.classList.add('loaded');
          imageDiv.innerHTML = "";
          imageDiv.appendChild(img);
        } else {
          imageDiv.innerHTML = "<span>?</span>";
        }
      } else {
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = "Ajouter un nom";
        input.autocomplete = "off";

        const boutonRecruter = document.createElement('button');
        boutonRecruter.textContent = "Changer";
        boutonRecruter.disabled = true;

        const suggestions = document.getElementById('suggestions');

        input.addEventListener("input", async () => {
          const query = input.value.trim();
          suggestions.innerHTML = "";
          boutonRecruter.disabled = true;
          if (query.length < 2) return;

          async function rechercherWiki(lang, query) {
            const res = await fetch(`https://${lang}.wikipedia.org/w/api.php?action=query&format=json&origin=*&prop=pageimages|pageprops&piprop=thumbnail&pithumbsize=100&generator=prefixsearch&gpssearch=${encodeURIComponent(query)}&gpslimit=5`);
            const data = await res.json();
            return data.query ? Object.values(data.query.pages) : [];
          }

          async function chercher

  </script>
</body>
</html>

